<?php

$Length = $Width = $Diameter = $RectPrice = $CirclePrice = NULL;
$RectValue = $CircleValue = NULL;
$LengthErr = $WidthErr = $DiameterErr = $RectPriceErr = $CirclePriceErr = NULL;
$valid = NULL;

if ($_SERVER["REQUEST_METHOD"] == "POST") {

    $Length = $_POST["Length"];
    $Width = $_POST["Width"];
    $Diameter = $_POST["Diameter"];
    $RectPrice = $_POST["RectPrice"];
    $CirclePrice = $_POST["CirclePrice"];

    $valid = true;

    if (empty($Length) || $Length <= 0 || $Length > 24) {
        $LengthErr = "Length invalid.";
        $valid = false;
    }

    if (empty($Width) || $Width <= 0 || $Width > 24) {
        $WidthErr = "Width invalid.";
        $valid = false;
    }

    if (empty($RectPrice) || $RectPrice <= 0 || $RectPrice > 100) {
        $RectPriceErr = "Price invalid.";
        $valid = false;
    }

    if (empty($Diameter) || $Diameter <= 0 || $Diameter > 24) {
        $DiameterErr = "Diameter invalid.";
        $valid = false;
    }

    if (empty($CirclePrice) || $CirclePrice <= 0 || $CirclePrice > 100) {
        $CirclePriceErr = "Price invalid.";
        $valid = false;
    }

    if ($valid) {

        $RectArea = $Length * $Width;
        $RectValue = number_format($RectPrice / $RectArea, 4);

        $Radius = $Diameter / 2;
        $CircleArea = pi() * $Radius * $Radius;
        $CircleValue = number_format($CirclePrice / $CircleArea, 4);
    }
}
?>

<!DOCTYPE html>
<html>
<head>
<title>Pizza Value</title>
</head>
<body>

<form method="post">

<fieldset>
<legend>Rectangular Pizza</legend>

Length <input type="text" name="Length" value="<?php echo $Length; ?>"><br>
Width <input type="text" name="Width" value="<?php echo $Width; ?>"><br>
Price <input type="text" name="RectPrice" value="<?php echo $RectPrice; ?>"><br>

<font color="red">
<?php
echo $LengthErr . " ";
echo $WidthErr . " ";
echo $RectPriceErr;
?>
</font>

</fieldset>

<br>

<fieldset>
<legend>Circular Pizza</legend>

Diameter <input type="text" name="Diameter" value="<?php echo $Diameter; ?>"><br>
Price <input type="text" name="CirclePrice" value="<?php echo $CirclePrice; ?>"><br>

<font color="red">
<?php
echo $DiameterErr . " ";
echo $CirclePriceErr;
?>
</font>

</fieldset>

<br>
<input type="submit" value="Go!">
</form>

<br>

<?php
if ($RectValue != NULL && $CircleValue != NULL) {
    echo "Rectangular: $" . $RectValue . " per square in<br>";
    echo "Circular: $" . $CircleValue . " per square in";
}
?>

</body>
</html>
